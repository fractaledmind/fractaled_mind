<!doctype html>
<html lang="en">
  <head>
  <!-- Metadata declarations -->
  <meta charset="utf-8" />
  <meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1' />
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Content declarations -->
  <title>Fractaled Mind</title>
  <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="feed.xml" />

  <!-- External Resources -->
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js" ></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>

  <!-- Internal Resources -->
  <link href="../../stylesheets/main.css" rel="stylesheet" type="text/css" />
  <link href="../../images/favicon.png" rel="icon" type="image/png" />
  <script src="../../javascripts/bigfoot.js" type="text/javascript"></script>
  <script src="../../javascripts/search.js" type="text/javascript"></script>

  <!-- Bigfoot.js Popover Footnotes -->
  <script type="text/javascript">
    $(document).ready(function(){
      $.bigfoot({
        numberResetSelector: ".card",
        activateCallback: function($popover, $button) {
          if (MathJax && !$button.data('mathjax-processed')) {
            var content_wrapper = $popover.find('.bigfoot-footnote__content')[0];
            MathJax.Hub.Queue(['Typeset', MathJax.Hub, content_wrapper]);
            MathJax.Hub.Queue(function () {
              $button.attr('data-bigfoot-footnote', content_wrapper.innerHTML);
              $button.data('mathjax-processed', true);
            });
          }
        }
      });
    });
  </script>

  <!-- Responsive Tables -->
  <script type="text/javascript">
    $(document).ready(function(){
      $("td").each(function() {
        var $th = $(this).closest('table').find('th').eq($(this).index());
        $(this).attr('data-th', $th.text());
      });
    });
  </script>

  <!-- Scroll-Fix sidebar
  <script type="text/javascript">
    $(window).on("scroll", function(e) {
      var scroll = $(this).scrollTop();
      var logo_height = $('#site-logo').height();
      var nav_height = $('.navigation').height() + 16;

      if (scroll > logo_height) {
        $('.navigation').css({'position': 'fixed'});
         $('#sidebar').css({
           'position': 'fixed',
           'top': nav_height
         });
      } else {
        $('.navigation').css({'position': 'inherit'});
        $('#sidebar').css({'position': 'inherit'});
      }
    });
  </script>
  -->

</head>


  <body>
    <header>
  <div id="site-logo">
    <a href="/" class="no-hvr">
      <img alt="Fractaled Mind" src="../../images/logo.svg" />
    </a>
  </div>

  <ul id="social-networks">
    <li>
      <a href="https://facebook.com/fractaledmind" class="no-hvr">
        <i class="fa fa-facebook fa-lg"></i>
      </a>
    </li>
    <li>
      <a href="https://twitter.com/fractaledmind" class="no-hvr">
        <i class="fa fa-twitter fa-lg"></i>
      </a>
    </li>
    <li>
      <a href="https://github.com/fractaledmind" class="no-hvr">
        <i class="fa fa-github fa-lg"></i>
      </a>
    </li>
    <li>
      <a href="mailto:stephen@fractaledmind.com" class="no-hvr">
        <i class="fa fa-envelope fa-lg"></i>
      </a>
    </li>
    <li>
      <a href="/feed.xml" class="no-hvr">
        <i class="fa fa-rss fa-lg"></i>
      </a>
    </li>
  </ul>
</header>


    <div class="navigation">
  <nav role="navigation">
    <ul class="navigation-menu">
      <li class="nav-link"><a href="../">articles</a></li>
      <li class="nav-link"><a href="../../projects/">projects</a></li>
      <li class="nav-link"><a href="../../jots/">jots</a></li>
      <li class="nav-link"><a href="../../essays/">essays</a></li>
    </ul>
  </nav>

  <div id="search">
    <div class="searchbar">
      <form role="search" action="/search" method="get">
        <input class="search-term" type="search" placeholder="Search..." name="q" />
        <button class="search-submit" type="submit">
          <img src="https://raw.githubusercontent.com/thoughtbot/refills/master/source/images/search-icon-black.png" alt="Search Icon">
        </button>
      </form>
    </div>
  </div>
</div>


    <div id="main" role="main">
      <div class="card" id="project-page">

    <ul class="card-tags">
      <li class="breadcrumb">
            <a class="code-tag" href="/topics/code/">code</a>
            <a class="ruby-tag" href="/topics/ruby/">ruby</a>
      </li>
      <li class="breadcrumb">
            <a class="code-tag" href="/topics/code/">code</a>
            <a class="rails-tag" href="/topics/rails/">rails</a>
      </li>
  </ul>


  <!-- if item has tags, add filler element -->
  <div id="tag-filler-space"></div>


  

  <h2 id="title"><p>Typecasting in Ruby and Rails</p>
</h2>

  <hr class="fractal">

  <div id="description"><p>I recently had the need to typecast string values passed as query parameters to a controller action to their appropriate type. In solving this problem, I’ve learned a lot about Rails’ typecasting layer, Ruby’s typecasting methods, as well as a handful of edge cases. The result was a typecasting function that I think has a lot to offer.</p>

<hr />

<p>The first key to any attempt at typecasting is to understand what you are casting <em>from</em> and what you are casting <em>to</em>. It is no small task to write a typecaster that properly and intelligently handles casting any kind of value into any other kind of value. Luckily for me, this was not the situation I was in. I had a fixed <em>from</em> type–I was always casting <em>from</em> a string value. So, all I needed was a typecaster that properly and intelligently handles casting a string value into any other kind of value. ¯_(ツ)_/¯</p>

<p>I was working in the context of a Rails application, so my first thought was that I could simply use the typecasting layer baked into ActiveRecord. In Rails 4.x, <code>ActiveRecord::Type</code> has a number of descendent classes representing the various datatypes that ActiveRecord handles:</p>

<ul>
  <li>Boolean</li>
  <li>Date</li>
  <li>DateTime</li>
  <li>Decimal</li>
  <li>Float</li>
  <li>Integer</li>
  <li>String</li>
  <li>Time</li>
</ul>

<p>Each of these classes have an instance method <code>type_cast</code> that accepts one param and tries to return a new value of the type that class represents. So, for example, <code>ActiveRecord::Type::Boolean.new.type_cast('true')</code> would return <code>true</code>.</p>

<p>In Rails 5.x, this same essential functionality lives in classes under the <code>ActiveModel::Type</code> namespace and the instance method is <code>cast</code>. So, if I wanted something to work across Rails versions, I would need to handle these changes.</p>

<p>However, this Rails <code>Type</code> layer has its limitations. First, it doesn’t cover all of the scalar Ruby types (the <code>Complex</code> and <code>Rational</code> numeric types for example). Second, the boolean type does not map to an actual Ruby class. <code>true.class</code> returns <code>TrueClass</code>, not <code>Boolean</code>. This limits our ability to simply use the class of the desired value type as a way of finding the appropriate <code>Type</code> class to use for the casting.</p>

<p>These aren’t major problems, but they are real ones.</p>

<hr />

<p>When investigating typecasting typecasting in Ruby, you hopefully shouldn’t go too far without thinking of the various <code>#to_*</code> methods. Ruby has a well defined and often used typecasting infrastructure. <code>to_s</code> casts a value to a <code>String</code>, <code>to_f</code> casts a value to a <code>Float</code>, <code>to_i</code> casts a value to an <code>Integer</code>, etc.</p>

<p>These are a helpful tool in our toolbox, but this too has limitations. First, there is no <code>#to_*</code> method that casts values into <code>true</code> or <code>false</code>. Second, not every value instance has the same collection of <code>#to_*</code> methods available to it. Third, the <code>to_date</code>, <code>to_datetime</code>, and <code>to_time</code> methods are provided by ActiveSupport and are not a part of basic Ruby.</p>

<p>Some of these are major problems, others less so.</p>

<hr />

<p>Having investigated these two mechanisms for typecasting, my thought was to combine them. Let’s try typecasting with one mechanism, and if it doesn’t work try the other one. I want a module namespace with one public method <code>cast</code> that takes two params, <code>from</code> and <code>to</code>. I want the method to either return the <code>from</code> value cast into the <code>to</code> class or, if that fails, to simply return back the <code>from</code> value. I also want want the method to only use as many “adapters” as necessary (adapters being the typecasting mechanisms). So, if we can cast the value using basic Ruby, cast and return. Only use the Rails <code>Type</code> layer if the Ruby layer can’t get the job done.</p>

<p>With these feature requirements in mind, let’s start writing our module and method.</p>

<div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10</pre></td><td class="code"><pre><span class="k">module</span> <span class="nn">TypeCaster</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">cast</span><span class="p">(</span><span class="n">from</span><span class="p">:,</span> <span class="n">to</span><span class="p">:)</span>
    <span class="n">adapters</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">adapter</span><span class="o">|</span>
      <span class="n">value</span> <span class="o">=</span> <span class="n">adapter</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">).</span><span class="nf">process</span>
      <span class="k">return</span> <span class="n">value</span> <span class="k">unless</span> <span class="n">value</span><span class="p">.</span><span class="nf">nil?</span>
    <span class="k">end</span>

    <span class="n">from</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table>
</div>

<p>Here I am expecting to be able to call an <code>adapters</code> getter that will return an Enumerable of classes that take two params on initialization and have a public <code>process</code> method. I am going to use the <a href="https://bogdanvlviv.github.io/posts/ruby/patterns/design-patterns-in-ruby.html#adapter">Adapter structural design pattern</a> for these classes to provide a consistent interface to the two typecasting mechanisms we have. So, let’s start building that adapter classes.</p>

<p>We know we have a few feature requirements:</p>

<ol>
  <li>the class needs to accepts two params on initialization</li>
  <li>the class needs a public <code>process</code> method that takes no params</li>
  <li>the <code>process</code> method needs to <em>either</em> return the typecasted value <em>or</em> <code>nil</code></li>
</ol>

<p>The first two are simple, so let’s start there:</p>

<div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10</pre></td><td class="code"><pre><span class="k">class</span> <span class="nc">PlainRubyAdapter</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">)</span>
    <span class="vi">@from</span> <span class="o">=</span> <span class="n">from</span>
    <span class="vi">@to</span> <span class="o">=</span> <span class="n">to</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">process</span>
    <span class="k">return</span> <span class="vi">@from</span> <span class="k">if</span> <span class="vi">@from</span><span class="p">.</span><span class="nf">is_a?</span> <span class="vi">@to</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table>
</div>

<p>The next key is getting the various <code>#to_*</code> method available on the <code>@from</code> value.</p>

<div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18</pre></td><td class="code"><pre><span class="k">class</span> <span class="nc">PlainRubyAdapter</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">)</span>
    <span class="vi">@from</span> <span class="o">=</span> <span class="n">from</span>
    <span class="vi">@to</span> <span class="o">=</span> <span class="n">to</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">process</span>
    <span class="k">return</span> <span class="vi">@from</span> <span class="k">if</span> <span class="vi">@from</span><span class="p">.</span><span class="nf">is_a?</span> <span class="vi">@to</span>
  <span class="k">end</span>

  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">possible_typecasters</span>
    <span class="vi">@possible_typecasters</span> <span class="o">||=</span> <span class="vi">@from</span><span class="p">.</span><span class="nf">methods</span>
                                   <span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:to_s</span><span class="p">)</span>
                                   <span class="p">.</span><span class="nf">select</span> <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="n">m</span><span class="p">.</span><span class="nf">start_with?</span> <span class="s1">'to_'</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table>
</div>

<p>Here I am memoizing the result mostly as a general practice; healthy habit and all that. The logic itself of the method is straightforward though–from the set of all of <code>@from</code>’s methods, pull out those that start with the string <code>to_</code>. This will give us a collection of methods that will cast the <code>@from</code> value <em>to</em> various other types. The next step is to actually use these methods to do some typecasting:</p>

<div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></td><td class="code"><pre><span class="k">class</span> <span class="nc">PlainRubyAdapter</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">)</span>
    <span class="vi">@from</span> <span class="o">=</span> <span class="n">from</span>
    <span class="vi">@to</span> <span class="o">=</span> <span class="n">to</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">process</span>
    <span class="k">return</span> <span class="vi">@from</span> <span class="k">if</span> <span class="vi">@from</span><span class="p">.</span><span class="nf">is_a?</span> <span class="vi">@to</span>
  <span class="k">end</span>

  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">possible_values</span>
    <span class="n">possible_typecasters</span><span class="p">.</span><span class="nf">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="vi">@from</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="p">}</span>
                        <span class="p">.</span><span class="nf">compact</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">possible_typecasters</span>
    <span class="vi">@possible_typecasters</span> <span class="o">||=</span> <span class="vi">@from</span><span class="p">.</span><span class="nf">methods</span>
                                   <span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:to_s</span><span class="p">)</span>
                                   <span class="p">.</span><span class="nf">select</span> <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="n">m</span><span class="p">.</span><span class="nf">start_with?</span> <span class="s1">'to_'</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table>
</div>

<p>This <code>possible_values</code> method will convert a collection of typecasting methods into a collection of typecasted values (removing any <code>nil</code>s created along the way). The final step is simply to return the typecasted value that matches <code>@to</code>, if it exists in the collection of <code>possible_values</code>, or return <code>nil</code>:</p>

<div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></td><td class="code"><pre><span class="k">class</span> <span class="nc">PlainRubyAdapter</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">)</span>
    <span class="vi">@from</span> <span class="o">=</span> <span class="n">from</span>
    <span class="vi">@to</span> <span class="o">=</span> <span class="n">to</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">process</span>
    <span class="k">return</span> <span class="vi">@from</span> <span class="k">if</span> <span class="vi">@from</span><span class="p">.</span><span class="nf">is_a?</span> <span class="vi">@to</span>

    <span class="n">possible_values</span><span class="p">.</span><span class="nf">find</span> <span class="p">{</span> <span class="o">|</span><span class="n">v</span><span class="o">|</span> <span class="n">v</span><span class="p">.</span><span class="nf">is_a?</span> <span class="vi">@to</span> <span class="p">}</span>
  <span class="k">end</span>

  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">possible_values</span>
    <span class="n">possible_typecasters</span><span class="p">.</span><span class="nf">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="vi">@from</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="p">}</span>
                        <span class="p">.</span><span class="nf">compact</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">possible_typecasters</span>
    <span class="vi">@possible_typecasters</span> <span class="o">||=</span> <span class="vi">@from</span><span class="p">.</span><span class="nf">methods</span>
                                   <span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:to_s</span><span class="p">)</span>
                                   <span class="p">.</span><span class="nf">select</span> <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="n">m</span><span class="p">.</span><span class="nf">start_with?</span> <span class="s1">'to_'</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table>
</div>

<p><code>Enumerable#find</code> is a perfect method for either returning a value in a collection that matches a condition or returning <code>nil</code>.</p>

<hr />

<p>The <code>PlainRubyAdapter</code> was fairly straightforward; To handle the differences between Rails 4.x and 5.x, however, this next adapter will be a bit more complicated.</p>

<p>The basic requirements are the same, so let’s start with the basic skeleton:</p>

<div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10</pre></td><td class="code"><pre><span class="k">class</span> <span class="nc">RailsTypeAdapter</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">)</span>
    <span class="vi">@from</span> <span class="o">=</span> <span class="n">from</span>
    <span class="vi">@to</span> <span class="o">=</span> <span class="n">to</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">process</span>
    <span class="k">return</span> <span class="vi">@from</span> <span class="k">if</span> <span class="vi">@from</span><span class="p">.</span><span class="nf">is_a?</span> <span class="vi">@to</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table>
</div>

<p>Now, let’s begin with determining which namespace we can find the <code>Type</code> code in. We know that we will need to <code>require</code> an external dependency and use the appropriate namespace for finding descendent classes. Here’s a simple way to handle our two scenarios:</p>

<div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></td><td class="code"><pre><span class="k">class</span> <span class="nc">RailsTypeAdapter</span>
  <span class="k">begin</span>
    <span class="nb">require</span> <span class="s1">'active_model/type'</span>
  <span class="k">rescue</span> <span class="no">LoadError</span>
    <span class="nb">require</span> <span class="s1">'active_record/type'</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">)</span>
    <span class="vi">@from</span> <span class="o">=</span> <span class="n">from</span>
    <span class="vi">@to</span> <span class="o">=</span> <span class="n">to</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">process</span>
    <span class="k">return</span> <span class="vi">@from</span> <span class="k">if</span> <span class="vi">@from</span><span class="p">.</span><span class="nf">is_a?</span> <span class="vi">@to</span>
  <span class="k">end</span>

  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">type_class</span>
    <span class="no">ActiveModel</span><span class="o">::</span><span class="no">Type</span>
  <span class="k">rescue</span> <span class="no">NameError</span>
    <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Type</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table>
</div>

<p>We will try to use the Rails 5.x (<code>ActiveModel::Type</code>) code first and fallback to the Rails 4.x code otherwise (<code>ActiveRecord::Type</code>). With that handled, let’s next gather the collection of possible typecasting classes:</p>

<div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36</pre></td><td class="code"><pre><span class="k">class</span> <span class="nc">RailsTypeAdapter</span>
  <span class="k">begin</span>
    <span class="nb">require</span> <span class="s1">'active_model/type'</span>
  <span class="k">rescue</span> <span class="no">LoadError</span>
    <span class="nb">require</span> <span class="s1">'active_record/type'</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">)</span>
    <span class="vi">@from</span> <span class="o">=</span> <span class="n">from</span>
    <span class="vi">@to</span> <span class="o">=</span> <span class="n">to</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">process</span>
    <span class="k">return</span> <span class="vi">@from</span> <span class="k">if</span> <span class="vi">@from</span><span class="p">.</span><span class="nf">is_a?</span> <span class="vi">@to</span>
  <span class="k">end</span>

  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">possible_typecasters</span>
    <span class="vi">@possible_typecasters</span> <span class="o">||=</span> <span class="n">type_class</span><span class="p">.</span><span class="nf">constants</span>
                                        <span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:to_s</span><span class="p">)</span>
                                        <span class="p">.</span><span class="nf">select</span> <span class="p">{</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span> <span class="n">can_typecast?</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="p">}</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">type_class</span>
    <span class="no">ActiveModel</span><span class="o">::</span><span class="no">Type</span>
  <span class="k">rescue</span> <span class="no">NameError</span>
    <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Type</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">can_typecast?</span><span class="p">(</span><span class="n">const_name</span><span class="p">)</span>
    <span class="n">typecasting_class</span> <span class="o">=</span> <span class="n">type_class</span><span class="p">.</span><span class="nf">const_get</span><span class="p">(</span><span class="n">const_name</span><span class="p">)</span>
    <span class="n">typecasting_class</span><span class="p">.</span><span class="nf">instance_methods</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="ss">:cast</span><span class="p">)</span> <span class="o">||</span>
      <span class="n">typecasting_class</span><span class="p">.</span><span class="nf">instance_methods</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="ss">:type_cast</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table>
</div>

<p>Recall that the Rails 5.x code (<code>ActiveModel::Type</code>) uses the <code>cast</code> method, while the Rails 4.x code (<code>ActiveSupport::Type</code>) uses the <code>type_cast</code> method. So, in order to determine if one of the descendent classes of the our type namespace can typecast, we need to check for either method. Aside from that, the logic is essentially the same as what we have in the <code>PlainRubyAdapter</code>.</p>

<p>With a collection of classes that are capable of typecasting, let’s now get the collection of typecasted values:</p>

<div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47</pre></td><td class="code"><pre><span class="k">class</span> <span class="nc">RailsTypeAdapter</span>
  <span class="k">begin</span>
    <span class="nb">require</span> <span class="s1">'active_model/type'</span>
  <span class="k">rescue</span> <span class="no">LoadError</span>
    <span class="nb">require</span> <span class="s1">'active_record/type'</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">)</span>
    <span class="vi">@from</span> <span class="o">=</span> <span class="n">from</span>
    <span class="vi">@to</span> <span class="o">=</span> <span class="n">to</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">process</span>
    <span class="k">return</span> <span class="vi">@from</span> <span class="k">if</span> <span class="vi">@from</span><span class="p">.</span><span class="nf">is_a?</span> <span class="vi">@to</span>
  <span class="k">end</span>

  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">possible_values</span>
    <span class="n">possible_typecasters</span><span class="p">.</span><span class="nf">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span> <span class="n">type_class</span><span class="p">.</span><span class="nf">const_get</span><span class="p">(</span><span class="n">t</span><span class="p">).</span><span class="nf">new</span> <span class="p">}</span>
                        <span class="p">.</span><span class="nf">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="n">typecast</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="vi">@from</span><span class="p">)</span> <span class="p">}</span>
                        <span class="p">.</span><span class="nf">compact</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">possible_typecasters</span>
    <span class="vi">@possible_typecasters</span> <span class="o">||=</span> <span class="n">type_class</span><span class="p">.</span><span class="nf">constants</span>
                                        <span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:to_s</span><span class="p">)</span>
                                        <span class="p">.</span><span class="nf">select</span> <span class="p">{</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span> <span class="n">can_typecast?</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="p">}</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">type_class</span>
    <span class="no">ActiveModel</span><span class="o">::</span><span class="no">Type</span>
  <span class="k">rescue</span> <span class="no">NameError</span>
    <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Type</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">can_typecast?</span><span class="p">(</span><span class="n">const_name</span><span class="p">)</span>
    <span class="n">typecasting_class</span> <span class="o">=</span> <span class="n">type_class</span><span class="p">.</span><span class="nf">const_get</span><span class="p">(</span><span class="n">const_name</span><span class="p">)</span>
    <span class="n">typecasting_class</span><span class="p">.</span><span class="nf">instance_methods</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="ss">:cast</span><span class="p">)</span> <span class="o">||</span>
      <span class="n">typecasting_class</span><span class="p">.</span><span class="nf">instance_methods</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="ss">:type_cast</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">typecast</span><span class="p">(</span><span class="n">caster</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">caster</span><span class="p">.</span><span class="nf">type_cast</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">if</span> <span class="n">caster</span><span class="p">.</span><span class="nf">respond_to?</span> <span class="ss">:type_cast</span>
    <span class="n">caster</span><span class="p">.</span><span class="nf">cast</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table>
</div>

<p>Since the typecasting method, whether <code>type_cast</code> or <code>cast</code>, is an instance method, we first need to initialize our classes. Once we have an instance of the <code>Type</code> class, we can call the appropriate typecasting method. Finally, we discard any <code>nil</code>s. Our <code>possible_values</code> method will now return a collection of typecasted values. The last step is to either find the appropriate typecasted value or return <code>nil</code>:</p>

<div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49</pre></td><td class="code"><pre><span class="k">class</span> <span class="nc">RailsTypeAdapter</span>
  <span class="k">begin</span>
    <span class="nb">require</span> <span class="s1">'active_model/type'</span>
  <span class="k">rescue</span> <span class="no">LoadError</span>
    <span class="nb">require</span> <span class="s1">'active_record/type'</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">)</span>
    <span class="vi">@from</span> <span class="o">=</span> <span class="n">from</span>
    <span class="vi">@to</span> <span class="o">=</span> <span class="n">to</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">process</span>
    <span class="k">return</span> <span class="vi">@from</span> <span class="k">if</span> <span class="vi">@from</span><span class="p">.</span><span class="nf">is_a?</span> <span class="vi">@to</span>

    <span class="n">possible_values</span><span class="p">.</span><span class="nf">find</span> <span class="p">{</span> <span class="o">|</span><span class="n">v</span><span class="o">|</span> <span class="n">v</span><span class="p">.</span><span class="nf">is_a?</span> <span class="vi">@to</span> <span class="p">}</span>
  <span class="k">end</span>

  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">possible_values</span>
    <span class="n">possible_typecasters</span><span class="p">.</span><span class="nf">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span> <span class="n">type_class</span><span class="p">.</span><span class="nf">const_get</span><span class="p">(</span><span class="n">t</span><span class="p">).</span><span class="nf">new</span> <span class="p">}</span>
                        <span class="p">.</span><span class="nf">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="n">typecast</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="vi">@from</span><span class="p">)</span> <span class="p">}</span>
                        <span class="p">.</span><span class="nf">compact</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">possible_typecasters</span>
    <span class="vi">@possible_typecasters</span> <span class="o">||=</span> <span class="n">type_class</span><span class="p">.</span><span class="nf">constants</span>
                                        <span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:to_s</span><span class="p">)</span>
                                        <span class="p">.</span><span class="nf">select</span> <span class="p">{</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span> <span class="n">can_typecast?</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="p">}</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">type_class</span>
    <span class="no">ActiveModel</span><span class="o">::</span><span class="no">Type</span>
  <span class="k">rescue</span> <span class="no">NameError</span>
    <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Type</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">can_typecast?</span><span class="p">(</span><span class="n">const_name</span><span class="p">)</span>
    <span class="n">typecasting_class</span> <span class="o">=</span> <span class="n">type_class</span><span class="p">.</span><span class="nf">const_get</span><span class="p">(</span><span class="n">const_name</span><span class="p">)</span>
    <span class="n">typecasting_class</span><span class="p">.</span><span class="nf">instance_methods</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="ss">:cast</span><span class="p">)</span> <span class="o">||</span>
      <span class="n">typecasting_class</span><span class="p">.</span><span class="nf">instance_methods</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="ss">:type_cast</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">typecast</span><span class="p">(</span><span class="n">caster</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">caster</span><span class="p">.</span><span class="nf">type_cast</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">if</span> <span class="n">caster</span><span class="p">.</span><span class="nf">respond_to?</span> <span class="ss">:type_cast</span>
    <span class="n">caster</span><span class="p">.</span><span class="nf">cast</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table>
</div>

<p>We now have to classes that conform to our adapter interface that we can use in our <code>Typecaster.cast</code> method. Let’s now wire up the <code>adapters</code> getter in that module:</p>

<div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre></td><td class="code"><pre><span class="k">module</span> <span class="nn">TypeCaster</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">cast</span><span class="p">(</span><span class="n">from</span><span class="p">:,</span> <span class="n">to</span><span class="p">:)</span>
    <span class="n">adapters</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">adapter</span><span class="o">|</span>
      <span class="n">value</span> <span class="o">=</span> <span class="n">adapter</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">).</span><span class="nf">process</span>
      <span class="k">return</span> <span class="n">value</span> <span class="k">unless</span> <span class="n">value</span><span class="p">.</span><span class="nf">nil?</span>
    <span class="k">end</span>

    <span class="n">from</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">adapters</span>
    <span class="p">[</span><span class="no">PlainRubyAdapter</span><span class="p">,</span> <span class="no">RailsTypeAdapter</span><span class="p">]</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table>
</div>

<p>As one final piece, let’s also nest our adapter classes under the <code>TypeCaster</code> module namespace. This will help isolate them. We don’t want clients to use them directly; we want the only public interface to our typecasting logic to be <code>TypeCaster.cast</code>.</p>

<p>Here is our final implementation:</p>

<div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90</pre></td><td class="code"><pre><span class="k">module</span> <span class="nn">TypeCaster</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">cast</span><span class="p">(</span><span class="n">from</span><span class="p">:,</span> <span class="n">to</span><span class="p">:)</span>
    <span class="n">adapters</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">adapter</span><span class="o">|</span>
      <span class="n">value</span> <span class="o">=</span> <span class="n">adapter</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">).</span><span class="nf">process</span>
      <span class="k">return</span> <span class="n">value</span> <span class="k">unless</span> <span class="n">value</span><span class="p">.</span><span class="nf">nil?</span>
    <span class="k">end</span>

    <span class="n">from</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">adapters</span>
    <span class="p">[</span><span class="no">PlainRubyAdapter</span><span class="p">,</span> <span class="no">RailsTypeAdapter</span><span class="p">]</span>
  <span class="k">end</span>

  <span class="k">class</span> <span class="nc">PlainRubyAdapter</span>
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">)</span>
      <span class="vi">@from</span> <span class="o">=</span> <span class="n">from</span>
      <span class="vi">@to</span> <span class="o">=</span> <span class="n">to</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">process</span>
      <span class="k">return</span> <span class="vi">@from</span> <span class="k">if</span> <span class="vi">@from</span><span class="p">.</span><span class="nf">is_a?</span> <span class="vi">@to</span>

      <span class="n">possible_values</span><span class="p">.</span><span class="nf">find</span> <span class="p">{</span> <span class="o">|</span><span class="n">v</span><span class="o">|</span> <span class="n">v</span><span class="p">.</span><span class="nf">is_a?</span> <span class="vi">@to</span> <span class="p">}</span>
    <span class="k">end</span>

    <span class="kp">private</span>

    <span class="k">def</span> <span class="nf">possible_values</span>
      <span class="n">possible_typecasters</span><span class="p">.</span><span class="nf">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="vi">@from</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="p">}</span>
                          <span class="p">.</span><span class="nf">compact</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">possible_typecasters</span>
      <span class="vi">@possible_typecasters</span> <span class="o">||=</span> <span class="vi">@from</span><span class="p">.</span><span class="nf">methods</span>
                                     <span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:to_s</span><span class="p">)</span>
                                     <span class="p">.</span><span class="nf">select</span> <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="n">m</span><span class="p">.</span><span class="nf">start_with?</span> <span class="s1">'to_'</span> <span class="p">}</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">class</span> <span class="nc">RailsTypeAdapter</span>
    <span class="k">begin</span>
      <span class="nb">require</span> <span class="s1">'active_model/type'</span>
    <span class="k">rescue</span> <span class="no">LoadError</span>
      <span class="nb">require</span> <span class="s1">'active_record/type'</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">)</span>
      <span class="vi">@from</span> <span class="o">=</span> <span class="n">from</span>
      <span class="vi">@to</span> <span class="o">=</span> <span class="n">to</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">process</span>
      <span class="k">return</span> <span class="vi">@from</span> <span class="k">if</span> <span class="vi">@from</span><span class="p">.</span><span class="nf">is_a?</span> <span class="vi">@to</span>

      <span class="n">possible_values</span><span class="p">.</span><span class="nf">find</span> <span class="p">{</span> <span class="o">|</span><span class="n">v</span><span class="o">|</span> <span class="n">v</span><span class="p">.</span><span class="nf">is_a?</span> <span class="vi">@to</span> <span class="p">}</span>
    <span class="k">end</span>

    <span class="kp">private</span>

    <span class="k">def</span> <span class="nf">possible_values</span>
      <span class="n">possible_typecasters</span><span class="p">.</span><span class="nf">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span> <span class="n">type_class</span><span class="p">.</span><span class="nf">const_get</span><span class="p">(</span><span class="n">t</span><span class="p">).</span><span class="nf">new</span> <span class="p">}</span>
                          <span class="p">.</span><span class="nf">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="n">typecast</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="vi">@from</span><span class="p">)</span> <span class="p">}</span>
                          <span class="p">.</span><span class="nf">compact</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">possible_typecasters</span>
      <span class="vi">@possible_typecasters</span> <span class="o">||=</span> <span class="n">type_class</span><span class="p">.</span><span class="nf">constants</span>
                                          <span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:to_s</span><span class="p">)</span>
                                          <span class="p">.</span><span class="nf">select</span> <span class="p">{</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span> <span class="n">can_typecast?</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="p">}</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">type_class</span>
      <span class="no">ActiveModel</span><span class="o">::</span><span class="no">Type</span>
    <span class="k">rescue</span> <span class="no">NameError</span>
      <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Type</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">can_typecast?</span><span class="p">(</span><span class="n">const_name</span><span class="p">)</span>
      <span class="n">typecasting_class</span> <span class="o">=</span> <span class="n">type_class</span><span class="p">.</span><span class="nf">const_get</span><span class="p">(</span><span class="n">const_name</span><span class="p">)</span>
      <span class="n">typecasting_class</span><span class="p">.</span><span class="nf">instance_methods</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="ss">:cast</span><span class="p">)</span> <span class="o">||</span>
        <span class="n">typecasting_class</span><span class="p">.</span><span class="nf">instance_methods</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="ss">:type_cast</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">typecast</span><span class="p">(</span><span class="n">caster</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
      <span class="k">return</span> <span class="n">caster</span><span class="p">.</span><span class="nf">type_cast</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">if</span> <span class="n">caster</span><span class="p">.</span><span class="nf">respond_to?</span> <span class="ss">:type_cast</span>
      <span class="n">caster</span><span class="p">.</span><span class="nf">cast</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table>
</div>

<p>Now, this doesn’t handle all of our edgecases just yet, but this is a solid start, and I think this post has gotten long enough, so I’m going to save that for a later post.</p>
</div>
</div>

    </div>

    <aside id="sidebar">

  <hr class="fractal">

  <div id="recent-articles">
    <h5>Recent Posts</h5>
    <ul class="fa-ul">
        <li>
          <i class="fa-li fa fa-chevron-right"></i>
          <a href="../ruby-logic-interpreter-2/">Building an Interpreter for Propositional Logic</a>
        </li>
        <li>
          <i class="fa-li fa fa-chevron-right"></i>
          <a href="../ruby-logic-interpreter-1/">Building an Interpreter for Propositional Logic</a>
        </li>
        <li>
          <i class="fa-li fa fa-chevron-right"></i>
          <a href="../death-of-self/">Death of Self</a>
        </li>
        <li>
          <i class="fa-li fa fa-chevron-right"></i>
          <a href="../the-word-of-god/">The Word of God</a>
        </li>
        <li>
          <i class="fa-li fa fa-chevron-right"></i>
          <a href="../on-antinomies-and-paradoxes/">On Antinomies and Paradoxes</a>
        </li>
    </ul>
  </div>

  <hr class="fractal">

  <div id="all-tags">
    <h5><a href="../../topics/">Topics</a></h5>
    <ul class="list-none">
      <!-- Add all Article tags -->
        <li class="breadcrumb">
            <a class="philosophy-tag" href="/topics/philosophy/">philosophy</a>
            <a class="epistemology-tag" href="/topics/epistemology/">epistemology</a>
            <a class="math-tag" href="/topics/math/">math</a>
        </li>
        <li class="breadcrumb">
            <a class="philosophy-tag" href="/topics/philosophy/">philosophy</a>
            <a class="epistemology-tag" href="/topics/epistemology/">epistemology</a>
            <a class="logic-tag" href="/topics/logic/">logic</a>
        </li>
        <li class="breadcrumb">
            <a class="tutorial-tag" href="/topics/tutorial/">tutorial</a>
            <a class="pdf-workflow-tag" href="/topics/pdf-workflow/">pdf-workflow</a>
        </li>
        <li class="breadcrumb">
            <a class="prose-tag" href="/topics/prose/">prose</a>
            <a class="self-tag" href="/topics/self/">self</a>
        </li>
        <li class="breadcrumb">
            <a class="code-tag" href="/topics/code/">code</a>
            <a class="ruby-tag" href="/topics/ruby/">ruby</a>
        </li>
        <li class="breadcrumb">
            <a class="code-tag" href="/topics/code/">code</a>
            <a class="rails-tag" href="/topics/rails/">rails</a>
        </li>
        <li class="breadcrumb">
            <a class="poetry-tag" href="/topics/poetry/">poetry</a>
        </li>
        <li class="breadcrumb">
            <a class="tutorial-tag" href="/topics/tutorial/">tutorial</a>
            <a class="algorithms-tag" href="/topics/algorithms/">algorithms</a>
        </li>
        <li class="breadcrumb">
            <a class="philosophy-tag" href="/topics/philosophy/">philosophy</a>
            <a class="faith-tag" href="/topics/faith/">faith</a>
        </li>
        <li class="breadcrumb">
            <a class="code-tag" href="/topics/code/">code</a>
            <a class="git-tag" href="/topics/git/">git</a>
        </li>
        <li class="breadcrumb">
            <a class="tutorial-tag" href="/topics/tutorial/">tutorial</a>
            <a class="git-tag" href="/topics/git/">git</a>
        </li>
        <li class="breadcrumb">
            <a class="prose-tag" href="/topics/prose/">prose</a>
            <a class="relationships-tag" href="/topics/relationships/">relationships</a>
        </li>
        <li class="breadcrumb">
            <a class="poetry-tag" href="/topics/poetry/">poetry</a>
            <a class="relationships-tag" href="/topics/relationships/">relationships</a>
        </li>
        <li class="breadcrumb">
            <a class="code-tag" href="/topics/code/">code</a>
            <a class="css-tag" href="/topics/css/">css</a>
        </li>
        <li class="breadcrumb">
            <a class="prose-tag" href="/topics/prose/">prose</a>
            <a class="life-tag" href="/topics/life/">life</a>
        </li>
        <li class="breadcrumb">
            <a class="prose-tag" href="/topics/prose/">prose</a>
            <a class="faith-tag" href="/topics/faith/">faith</a>
        </li>
        <li class="breadcrumb">
            <a class="philosophy-tag" href="/topics/philosophy/">philosophy</a>
            <a class="ethics-tag" href="/topics/ethics/">ethics</a>
        </li>
        <li class="breadcrumb">
            <a class="code-tag" href="/topics/code/">code</a>
            <a class="ruby-tag" href="/topics/ruby/">ruby</a>
            <a class="interpreter-tag" href="/topics/interpreter/">interpreter</a>
        </li>
        <li class="breadcrumb">
            <a class="tutorial-tag" href="/topics/tutorial/">tutorial</a>
            <a class="interpreter-tag" href="/topics/interpreter/">interpreter</a>
        </li>
        <li class="breadcrumb">
            <a class="academia-tag" href="/topics/academia/">academia</a>
            <a class="latin-tag" href="/topics/latin/">latin</a>
            <a class="vergil-tag" href="/topics/vergil/">vergil</a>
        </li>
        <li class="breadcrumb">
            <a class="academia-tag" href="/topics/academia/">academia</a>
            <a class="greek-tag" href="/topics/greek/">greek</a>
            <a class="epicurus-tag" href="/topics/epicurus/">epicurus</a>
        </li>
        <li class="breadcrumb">
            <a class="academia-tag" href="/topics/academia/">academia</a>
            <a class="greek-tag" href="/topics/greek/">greek</a>
            <a class="aristotle-tag" href="/topics/aristotle/">aristotle</a>
        </li>
        <li class="breadcrumb">
            <a class="academia-tag" href="/topics/academia/">academia</a>
            <a class="latin-tag" href="/topics/latin/">latin</a>
            <a class="horace-tag" href="/topics/horace/">horace</a>
        </li>
        <li class="breadcrumb">
            <a class="academia-tag" href="/topics/academia/">academia</a>
            <a class="modern-tag" href="/topics/modern/">modern</a>
            <a class="lewis-tag" href="/topics/lewis/">lewis</a>
        </li>
        <li class="breadcrumb">
            <a class="academia-tag" href="/topics/academia/">academia</a>
            <a class="modern-tag" href="/topics/modern/">modern</a>
            <a class="barfield-tag" href="/topics/barfield/">barfield</a>
        </li>
        <li class="breadcrumb">
            <a class="academia-tag" href="/topics/academia/">academia</a>
            <a class="greek-tag" href="/topics/greek/">greek</a>
            <a class="herodotus-tag" href="/topics/herodotus/">herodotus</a>
        </li>
        <li class="breadcrumb">
            <a class="academia-tag" href="/topics/academia/">academia</a>
            <a class="greek-tag" href="/topics/greek/">greek</a>
            <a class="hippocrates-tag" href="/topics/hippocrates/">hippocrates</a>
        </li>
        <li class="breadcrumb">
            <a class="academia-tag" href="/topics/academia/">academia</a>
            <a class="greek-tag" href="/topics/greek/">greek</a>
            <a class="plato-tag" href="/topics/plato/">plato</a>
        </li>
        <li class="breadcrumb">
            <a class="academia-tag" href="/topics/academia/">academia</a>
            <a class="modern-tag" href="/topics/modern/">modern</a>
            <a class="saussure-tag" href="/topics/saussure/">saussure</a>
        </li>
        <li class="breadcrumb">
            <a class="code-tag" href="/topics/code/">code</a>
            <a class="alfred-tag" href="/topics/alfred/">alfred</a>
        </li>
        <li class="breadcrumb">
            <a class="code-tag" href="/topics/code/">code</a>
            <a class="bash-tag" href="/topics/bash/">bash</a>
        </li>
        <li class="breadcrumb">
            <a class="code-tag" href="/topics/code/">code</a>
            <a class="python-tag" href="/topics/python/">python</a>
        </li>
    </ul>
  </div>
</aside>


    <footer role="contentinfo">
  <div class="footer-info">
    <p>&copy; Copyright 2015 by Stephen Margheim</p>
    <p>Powered by <a href="https://middlemanapp.com">Middleman</a>.</p>
  </div>
</footer>


  </body>
</html>
