<!doctype html>
<html lang="en">
  <head>
  <!-- Metadata declarations -->
  <meta charset="utf-8" />
  <meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1' />
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Content declarations -->
  <title>Fractaled Mind</title>
  <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="feed.xml" />

  <!-- External Resources -->
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js" ></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>

  <!-- Internal Resources -->
  <link href="../../stylesheets/main.css" rel="stylesheet" type="text/css" />
  <link href="../../images/favicon.png" rel="icon" type="image/png" />
  <script src="../../javascripts/bigfoot.js" type="text/javascript"></script>
  <script src="../../javascripts/search.js" type="text/javascript"></script>

  <!-- Bigfoot.js Popover Footnotes -->
  <script type="text/javascript">
    $(document).ready(function(){
      $.bigfoot({
        numberResetSelector: ".card",
        activateCallback: function($popover, $button) {
          if (MathJax && !$button.data('mathjax-processed')) {
            var content_wrapper = $popover.find('.bigfoot-footnote__content')[0];
            MathJax.Hub.Queue(['Typeset', MathJax.Hub, content_wrapper]);
            MathJax.Hub.Queue(function () {
              $button.attr('data-bigfoot-footnote', content_wrapper.innerHTML);
              $button.data('mathjax-processed', true);
            });
          }
        }
      });
    });
  </script>

  <!-- Responsive Tables -->
  <script type="text/javascript">
    $(document).ready(function(){
      $("td").each(function() {
        var $th = $(this).closest('table').find('th').eq($(this).index());
        $(this).attr('data-th', $th.text());
      });
    });
  </script>

  <!-- Scroll-Fix sidebar
  <script type="text/javascript">
    $(window).on("scroll", function(e) {
      var scroll = $(this).scrollTop();
      var logo_height = $('#site-logo').height();
      var nav_height = $('.navigation').height() + 16;

      if (scroll > logo_height) {
        $('.navigation').css({'position': 'fixed'});
         $('#sidebar').css({
           'position': 'fixed',
           'top': nav_height
         });
      } else {
        $('.navigation').css({'position': 'inherit'});
        $('#sidebar').css({'position': 'inherit'});
      }
    });
  </script>
  -->

</head>


  <body>
    <header>
  <div id="site-logo">
    <a href="/" class="no-hvr">
      <img alt="Fractaled Mind" src="../../images/logo-single-line.svg" />
    </a>
  </div>
</header>


    <div class="navigation">
  <ul id="social-networks">
    <li>
      <a href="https://facebook.com/fractaledmind" class="no-hvr">
        <i class="fa fa-facebook fa-lg"></i>
      </a>
    </li>
    <li>
      <a href="https://twitter.com/fractaledmind" class="no-hvr">
        <i class="fa fa-twitter fa-lg"></i>
      </a>
    </li>
    <li>
      <a href="https://github.com/fractaledmind" class="no-hvr">
        <i class="fa fa-github fa-lg"></i>
      </a>
    </li>
    <li>
      <a href="mailto:stephen@fractaledmind.com" class="no-hvr">
        <i class="fa fa-envelope fa-lg"></i>
      </a>
    </li>
    <li>
      <a href="/feed.xml" class="no-hvr">
        <i class="fa fa-rss fa-lg"></i>
      </a>
    </li>
  </ul>

  <nav role="navigation">
    <ul class="navigation-menu">
      <li class="nav-link"><a href="../">articles</a></li>
      <li class="nav-link"><a href="../../projects/">projects</a></li>
      <li class="nav-link"><a href="../../jots/">jots</a></li>
      <li class="nav-link"><a href="../../essays/">essays</a></li>
    </ul>
  </nav>

  <div id="search">
    <div class="searchbar">
      <form role="search" action="/search" method="get">
        <input class="search-term" type="search" placeholder="Search..." name="q" />
        <button class="search-submit" type="submit">
          <img src="https://raw.githubusercontent.com/thoughtbot/refills/master/source/images/search-icon-black.png" alt="Search Icon">
        </button>
      </form>
    </div>
  </div>
</div>


    <div id="main" role="main">
      <div class="card" id="project-page">

    <ul class="card-tags">
      <li class="breadcrumb">
            <a class="code-tag" href="/topics/code/">code</a>
            <a class="ruby-tag" href="/topics/ruby/">ruby</a>
      </li>
  </ul>


  <!-- if item has tags, add filler element -->
  <div id="tag-filler-space"></div>


  

  <h2 id="title"><p>Safely Accessing Values from Nested Hashes (again)'</p>
</h2>

  <hr class="fractal">

  <div id="description"><p>In an <a href="http://fractaledmind.com/articles/accessing-values-from-nested-hashes/">earlier post</a> I discussed some potential issues with accessing values from a nested hash. That post ended with a method that utilized the <code>ActiveSupport</code> <code>try</code> in conjunction with the Ruby <code>dig</code> method to allow for accessing a nested hash without throwing an error even if the keypath didn’t properly match the hash structure. Since writing that post, I have come to further refine that method.</p>

<hr />

<p>Before jumping into any implementation details, I want to lay out my needs and write up some test cases to encode those needs.</p>

<p>The heart of the problem is that I often find myself attempting to access values from nested hashes that can take a wide variety of shapes; that is, they can be robustly hydrated or empty or any number of other states between. The first possible state we want to test for is dealing with an empty hash:</p>

<div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="n">expect</span><span class="p">(</span><span class="n">safe_dig</span><span class="p">({},</span> <span class="sx">%i[path to key]</span><span class="p">)).</span><span class="nf">to</span>            <span class="n">eq</span> <span class="kp">nil</span>
<span class="n">expect</span><span class="p">(</span><span class="n">safe_dig</span><span class="p">({},</span> <span class="sx">%i[path to key]</span><span class="p">,</span> <span class="s1">'default'</span><span class="p">)).</span><span class="nf">to</span> <span class="n">eq</span> <span class="s1">'default'</span>
</pre></td></tr></tbody></table>
</div>

<p>When attempting to access a value at a keypath for an empty hash, we want the default return value to be <code>nil</code>, but we also want to be able to set our own default return value.</p>

<p>Next, let’s test accessing a scalar value from a nested hash:</p>

<div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="n">expect</span><span class="p">(</span><span class="n">safe_dig</span><span class="p">({</span> <span class="ss">path: </span><span class="p">{</span> <span class="ss">to: </span><span class="p">{</span> <span class="ss">key: </span><span class="s1">'value'</span> <span class="p">}</span> <span class="p">}</span> <span class="p">},</span> <span class="sx">%i[path to key]</span><span class="p">)).</span><span class="nf">to</span>            <span class="n">eq</span> <span class="s1">'value'</span>
<span class="n">expect</span><span class="p">(</span><span class="n">safe_dig</span><span class="p">({</span> <span class="ss">path: </span><span class="p">{</span> <span class="ss">to: </span><span class="p">{</span> <span class="ss">key: </span><span class="s1">'value'</span> <span class="p">}</span> <span class="p">}</span> <span class="p">},</span> <span class="sx">%i[path to key]</span><span class="p">,</span> <span class="s1">'default'</span><span class="p">)).</span><span class="nf">to</span> <span class="n">eq</span> <span class="s1">'value'</span>
</pre></td></tr></tbody></table>
</div>

<p>Next, we can test accessing a sub-hash from the nested hash:</p>

<div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="n">expect</span><span class="p">(</span><span class="n">safe_dig</span><span class="p">({</span> <span class="ss">path: </span><span class="p">{</span> <span class="ss">to: </span><span class="p">{</span> <span class="ss">key: </span><span class="s1">'value'</span> <span class="p">}</span> <span class="p">}</span> <span class="p">},</span> <span class="sx">%i[path to]</span><span class="p">)).</span><span class="nf">to</span>            <span class="n">eq</span> <span class="p">{</span> <span class="ss">key: </span><span class="s1">'value'</span> <span class="p">}</span>
<span class="n">expect</span><span class="p">(</span><span class="n">safe_dig</span><span class="p">({</span> <span class="ss">path: </span><span class="p">{</span> <span class="ss">to: </span><span class="p">{</span> <span class="ss">key: </span><span class="s1">'value'</span> <span class="p">}</span> <span class="p">}</span> <span class="p">},</span> <span class="sx">%i[path to]</span><span class="p">,</span> <span class="s1">'default'</span><span class="p">)).</span><span class="nf">to</span> <span class="n">eq</span> <span class="p">{</span> <span class="ss">key: </span><span class="s1">'value'</span> <span class="p">}</span>
</pre></td></tr></tbody></table>
</div>

<p>Now, let’s start testing the case when we try to access an unexistent path in the nested hash:</p>

<div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="n">expect</span><span class="p">(</span><span class="n">safe_dig</span><span class="p">({</span> <span class="ss">path: </span><span class="p">{</span> <span class="ss">to: </span><span class="p">{</span> <span class="ss">key: </span><span class="s1">'value'</span> <span class="p">}</span> <span class="p">}</span> <span class="p">},</span> <span class="sx">%i[path to another key]</span><span class="p">)).</span><span class="nf">to</span>            <span class="n">eq</span> <span class="kp">nil</span>
<span class="n">expect</span><span class="p">(</span><span class="n">safe_dig</span><span class="p">({</span> <span class="ss">path: </span><span class="p">{</span> <span class="ss">to: </span><span class="p">{</span> <span class="ss">key: </span><span class="s1">'value'</span> <span class="p">}</span> <span class="p">}</span> <span class="p">},</span> <span class="sx">%i[path to another key]</span><span class="p">,</span> <span class="s1">'default'</span><span class="p">)).</span><span class="nf">to</span> <span class="n">eq</span> <span class="s1">'default'</span>
</pre></td></tr></tbody></table>
</div>

<p>Aside from setting a default return value, these tests match precisely how <code>Hash#dig</code> operates. Now, however, let’s start testing the case when we try to over-access the nested hash:</p>

<div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="n">expect</span><span class="p">(</span><span class="n">safe_dig</span><span class="p">({</span> <span class="ss">path: </span><span class="p">{</span> <span class="ss">to: </span><span class="p">{</span> <span class="ss">key: </span><span class="s1">'value'</span> <span class="p">}</span> <span class="p">}</span> <span class="p">},</span> <span class="sx">%i[path to key new]</span><span class="p">)).</span><span class="nf">to</span>            <span class="n">eq</span> <span class="kp">nil</span>
<span class="n">expect</span><span class="p">(</span><span class="n">safe_dig</span><span class="p">({</span> <span class="ss">path: </span><span class="p">{</span> <span class="ss">to: </span><span class="p">{</span> <span class="ss">key: </span><span class="s1">'value'</span> <span class="p">}</span> <span class="p">}</span> <span class="p">},</span> <span class="sx">%i[path to key new]</span><span class="p">,</span> <span class="s1">'default'</span><span class="p">)).</span><span class="nf">to</span> <span class="n">eq</span> <span class="s1">'default'</span>
</pre></td></tr></tbody></table>
</div>

<p>Were we to use simply <code>Hash#dig</code>, this keypath would throw a <code>TypeError: String does not have #dig method</code> because we would be trying to call <code>#dig</code> on the <code>'value'</code> string. Our <code>safe_dig</code> method, however, will simply return the default value (which is <code>nil</code> by default).</p>

<p>The final bit of functionality we want to cover is working with either <code>String</code> or <code>Symbol</code> keys. One of the most frustrating parts of working with hashes in Ruby is trying to access a value at a keypath where the keys are strings but you provide a keypath of symbols (or vice versa). Let’s ensure our <code>safe_dig</code> method works regardless of whether the keys or the keypath are symbols or strings:</p>

<div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre><span class="n">expect</span><span class="p">(</span><span class="n">safe_dig</span><span class="p">({</span> <span class="ss">path: </span><span class="p">{</span> <span class="ss">to: </span><span class="p">{</span> <span class="ss">key: </span><span class="s1">'value'</span> <span class="p">}</span> <span class="p">}</span> <span class="p">},</span> <span class="sx">%w[path to key]</span><span class="p">)).</span><span class="nf">to</span>                <span class="n">eq</span> <span class="s1">'value'</span>
<span class="n">expect</span><span class="p">(</span><span class="n">safe_dig</span><span class="p">({</span> <span class="ss">path: </span><span class="p">{</span> <span class="ss">to: </span><span class="p">{</span> <span class="ss">key: </span><span class="s1">'value'</span> <span class="p">}</span> <span class="p">}</span> <span class="p">},</span> <span class="sx">%w[path to key]</span><span class="p">,</span> <span class="s1">'default'</span><span class="p">)).</span><span class="nf">to</span>     <span class="n">eq</span> <span class="s1">'value'</span>
<span class="n">expect</span><span class="p">(</span><span class="n">safe_dig</span><span class="p">({</span> <span class="ss">path: </span><span class="p">{</span> <span class="ss">to: </span><span class="p">{</span> <span class="ss">key: </span><span class="s1">'value'</span> <span class="p">}</span> <span class="p">}</span> <span class="p">},</span> <span class="sx">%w[path to key new]</span><span class="p">)).</span><span class="nf">to</span>            <span class="n">eq</span> <span class="kp">nil</span>
<span class="n">expect</span><span class="p">(</span><span class="n">safe_dig</span><span class="p">({</span> <span class="ss">path: </span><span class="p">{</span> <span class="ss">to: </span><span class="p">{</span> <span class="ss">key: </span><span class="s1">'value'</span> <span class="p">}</span> <span class="p">}</span> <span class="p">},</span> <span class="sx">%w[path to key new]</span><span class="p">,</span> <span class="s1">'default'</span><span class="p">)).</span><span class="nf">to</span> <span class="n">eq</span> <span class="s1">'default'</span>

<span class="n">expect</span><span class="p">(</span><span class="n">safe_dig</span><span class="p">({</span> <span class="s1">'path'</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="s1">'to'</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="s1">'key'</span> <span class="o">=&gt;</span> <span class="s1">'value'</span> <span class="p">}</span> <span class="p">}</span> <span class="p">},</span> <span class="sx">%i[path to key]</span><span class="p">)).</span><span class="nf">to</span>                <span class="n">eq</span> <span class="s1">'value'</span>
<span class="n">expect</span><span class="p">(</span><span class="n">safe_dig</span><span class="p">({</span> <span class="s1">'path'</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="s1">'to'</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="s1">'key'</span> <span class="o">=&gt;</span> <span class="s1">'value'</span> <span class="p">}</span> <span class="p">}</span> <span class="p">},</span> <span class="sx">%i[path to key]</span><span class="p">,</span> <span class="s1">'default'</span><span class="p">)).</span><span class="nf">to</span>     <span class="n">eq</span> <span class="s1">'value'</span>
<span class="n">expect</span><span class="p">(</span><span class="n">safe_dig</span><span class="p">({</span> <span class="s1">'path'</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="s1">'to'</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="s1">'key'</span> <span class="o">=&gt;</span> <span class="s1">'value'</span> <span class="p">}</span> <span class="p">}</span> <span class="p">},</span> <span class="sx">%i[path to key new]</span><span class="p">)).</span><span class="nf">to</span>            <span class="n">eq</span> <span class="kp">nil</span>
<span class="n">expect</span><span class="p">(</span><span class="n">safe_dig</span><span class="p">({</span> <span class="s1">'path'</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="s1">'to'</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="s1">'key'</span> <span class="o">=&gt;</span> <span class="s1">'value'</span> <span class="p">}</span> <span class="p">}</span> <span class="p">},</span> <span class="sx">%i[path to key new]</span><span class="p">,</span> <span class="s1">'default'</span><span class="p">)).</span><span class="nf">to</span> <span class="n">eq</span> <span class="s1">'default'</span>
</pre></td></tr></tbody></table>
</div>

<hr />

<p>With these tests in place, let’s write our <code>safe_dig</code> method. However, instead of using the method defined in the previous post (which relies on <code>try</code>), let’s write a method that works with pure Ruby. Since we are accessing a value via a keypath, I find that <a href=""><code>Enumerable#reduce</code></a> makes the most sense to form the backbone of our method:</p>

<div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="k">def</span> <span class="nf">safe_dig</span><span class="p">(</span><span class="nb">hash</span><span class="p">,</span> <span class="n">keypath</span><span class="p">,</span> <span class="n">default</span> <span class="o">=</span> <span class="kp">nil</span><span class="p">)</span>
  <span class="n">keypath</span><span class="p">.</span><span class="nf">reduce</span><span class="p">(</span><span class="nb">hash</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">accessible</span><span class="p">,</span> <span class="n">key</span><span class="o">|</span> <span class="n">accessible</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="p">}</span>
<span class="k">end</span>
</pre></td></tr></tbody></table>
</div>

<p>Now, this method as written now will fail a number of our tests. We need to make the accessing of the <code>key</code> safer. We can do so firstly by guarding against the case where the <code>accessible</code> hash doesn’t have the key we desire to access:</p>

<div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7</pre></td><td class="code"><pre><span class="k">def</span> <span class="nf">safe_dig</span><span class="p">(</span><span class="nb">hash</span><span class="p">,</span> <span class="n">keypath</span><span class="p">,</span> <span class="n">default</span> <span class="o">=</span> <span class="kp">nil</span><span class="p">)</span>
  <span class="n">keypath</span><span class="p">.</span><span class="nf">reduce</span><span class="p">(</span><span class="nb">hash</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">accessible</span><span class="p">,</span> <span class="n">key</span><span class="o">|</span>
    <span class="k">return</span> <span class="n">default</span> <span class="k">unless</span> <span class="n">accessible</span><span class="p">.</span><span class="nf">key?</span> <span class="n">key</span>

    <span class="n">accessible</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table>
</div>

<p>This makes our method much safer, but we still have an issue if/when <code>accessible</code> is some scalar value and not a hash; for, in that case, the value will not respond to the <code>key?</code> method and thus our method will throw an error. To guard against that scenario generally, let’s add an initial guard clause that ensures the <code>accessible</code> value is indeed a Hash:</p>

<div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8</pre></td><td class="code"><pre><span class="k">def</span> <span class="nf">safe_dig</span><span class="p">(</span><span class="nb">hash</span><span class="p">,</span> <span class="n">keypath</span><span class="p">,</span> <span class="n">default</span> <span class="o">=</span> <span class="kp">nil</span><span class="p">)</span>
  <span class="n">keypath</span><span class="p">.</span><span class="nf">reduce</span><span class="p">(</span><span class="nb">hash</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">accessible</span><span class="p">,</span> <span class="n">key</span><span class="o">|</span>
    <span class="k">return</span> <span class="n">default</span> <span class="k">unless</span> <span class="n">accessible</span><span class="p">.</span><span class="nf">is_a?</span> <span class="no">Hash</span>
    <span class="k">return</span> <span class="n">default</span> <span class="k">unless</span> <span class="n">accessible</span><span class="p">.</span><span class="nf">key?</span> <span class="n">key</span>

    <span class="n">accessible</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table>
</div>

<p>Now the method as it stands now will pass most of our tests; all of the tests, in fact, except for the tests dealing with strings and symbols. To make this method fully “safe”, we need to normalize our <code>hash</code> and our <code>keypath</code> to ensure the method works as desired regardless of whether keys in the <code>hash</code> or values in the <code>keypath</code> are strings or symbols. To that end, let’s normalize the <code>hash</code> and the <code>keypath</code> both to strings. The <code>keypath</code> will be easy, as it is an <code>Enumerable</code>, so we can simply use <code>keypath.map(&amp;:to_s)</code>. Deeply stringifying the <code>hash</code> is a bit more difficult. As stated above, I don’t want to rely on <code>ActiveSupport</code>, so we don’t have access to <code>Hash#deep_stringify_keys</code>. Luckily for us, however, Ruby offers a relatively simple “hack” to achieve our result. We can use the <code>JSON</code> module to deeply stringify our hash by simply calling <code>JSON.parse</code>. Let’s bring these bits into our method:</p>

<div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11</pre></td><td class="code"><pre><span class="k">def</span> <span class="nf">safe_dig</span><span class="p">(</span><span class="nb">hash</span><span class="p">,</span> <span class="n">keypath</span><span class="p">,</span> <span class="n">default</span> <span class="o">=</span> <span class="kp">nil</span><span class="p">)</span>
  <span class="n">stringified_hash</span> <span class="o">=</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="nb">hash</span><span class="p">.</span><span class="nf">to_json</span><span class="p">)</span>
  <span class="n">stringified_keypath</span> <span class="o">=</span> <span class="n">keypath</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:to_s</span><span class="p">)</span>

  <span class="n">stringified_keypath</span><span class="p">.</span><span class="nf">reduce</span><span class="p">(</span><span class="n">stringified_hash</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">accessible</span><span class="p">,</span> <span class="n">key</span><span class="o">|</span>
    <span class="k">return</span> <span class="n">default</span> <span class="k">unless</span> <span class="n">accessible</span><span class="p">.</span><span class="nf">is_a?</span> <span class="no">Hash</span>
    <span class="k">return</span> <span class="n">default</span> <span class="k">unless</span> <span class="n">accessible</span><span class="p">.</span><span class="nf">key?</span> <span class="n">key</span>

    <span class="n">accessible</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table>
</div>

<p>And just like that we have a <code>safe_dig</code> method that will allow to access values from (nested) hashes safely and intuitively!</p>
</div>
</div>

    </div>

    <aside id="sidebar">

  <hr class="fractal">

  <div id="recent-articles">
    <h5>Recent Posts</h5>
    <ul class="fa-ul">
        <li>
          <i class="fa-li fa fa-chevron-right"></i>
          <a href="./">Safely Accessing Values from Nested Hashes (again)'</a>
        </li>
        <li>
          <i class="fa-li fa fa-chevron-right"></i>
          <a href="../basic-restful-filtering-with-rails/">Basic RESTful Filtering with Rails</a>
        </li>
        <li>
          <i class="fa-li fa fa-chevron-right"></i>
          <a href="../css-tree-vertical/">Building Pure CSS Trees (part 2)</a>
        </li>
        <li>
          <i class="fa-li fa fa-chevron-right"></i>
          <a href="../css-tree/">Building Pure CSS Trees (part 1)</a>
        </li>
        <li>
          <i class="fa-li fa fa-chevron-right"></i>
          <a href="../what-is-mvc/">What is MVC?</a>
        </li>
    </ul>
  </div>

  <hr class="fractal">

  <div id="all-tags">
    <h5><a href="../../topics/">Topics</a></h5>
    <ul class="list-none">
      <!-- Add all Article tags -->
        <li class="breadcrumb">
            <a class="philosophy-tag" href="/topics/philosophy/">philosophy</a>
            <a class="epistemology-tag" href="/topics/epistemology/">epistemology</a>
            <a class="math-tag" href="/topics/math/">math</a>
        </li>
        <li class="breadcrumb">
            <a class="philosophy-tag" href="/topics/philosophy/">philosophy</a>
            <a class="epistemology-tag" href="/topics/epistemology/">epistemology</a>
            <a class="logic-tag" href="/topics/logic/">logic</a>
        </li>
        <li class="breadcrumb">
            <a class="tutorial-tag" href="/topics/tutorial/">tutorial</a>
            <a class="pdf-workflow-tag" href="/topics/pdf-workflow/">pdf-workflow</a>
        </li>
        <li class="breadcrumb">
            <a class="prose-tag" href="/topics/prose/">prose</a>
            <a class="self-tag" href="/topics/self/">self</a>
        </li>
        <li class="breadcrumb">
            <a class="code-tag" href="/topics/code/">code</a>
            <a class="ruby-tag" href="/topics/ruby/">ruby</a>
        </li>
        <li class="breadcrumb">
            <a class="code-tag" href="/topics/code/">code</a>
            <a class="rails-tag" href="/topics/rails/">rails</a>
        </li>
        <li class="breadcrumb">
            <a class="poetry-tag" href="/topics/poetry/">poetry</a>
        </li>
        <li class="breadcrumb">
            <a class="tutorial-tag" href="/topics/tutorial/">tutorial</a>
            <a class="algorithms-tag" href="/topics/algorithms/">algorithms</a>
        </li>
        <li class="breadcrumb">
            <a class="philosophy-tag" href="/topics/philosophy/">philosophy</a>
            <a class="faith-tag" href="/topics/faith/">faith</a>
        </li>
        <li class="breadcrumb">
            <a class="code-tag" href="/topics/code/">code</a>
            <a class="git-tag" href="/topics/git/">git</a>
        </li>
        <li class="breadcrumb">
            <a class="tutorial-tag" href="/topics/tutorial/">tutorial</a>
            <a class="git-tag" href="/topics/git/">git</a>
        </li>
        <li class="breadcrumb">
            <a class="prose-tag" href="/topics/prose/">prose</a>
            <a class="relationships-tag" href="/topics/relationships/">relationships</a>
        </li>
        <li class="breadcrumb">
            <a class="code-tag" href="/topics/code/">code</a>
            <a class="css-tag" href="/topics/css/">css</a>
            <a class="trees-tag" href="/topics/trees/">trees</a>
        </li>
        <li class="breadcrumb">
            <a class="tutorial-tag" href="/topics/tutorial/">tutorial</a>
            <a class="css-tag" href="/topics/css/">css</a>
            <a class="trees-tag" href="/topics/trees/">trees</a>
        </li>
        <li class="breadcrumb">
            <a class="poetry-tag" href="/topics/poetry/">poetry</a>
            <a class="relationships-tag" href="/topics/relationships/">relationships</a>
        </li>
        <li class="breadcrumb">
            <a class="code-tag" href="/topics/code/">code</a>
            <a class="css-tag" href="/topics/css/">css</a>
        </li>
        <li class="breadcrumb">
            <a class="code-tag" href="/topics/code/">code</a>
            <a class="http-tag" href="/topics/http/">http</a>
        </li>
        <li class="breadcrumb">
            <a class="prose-tag" href="/topics/prose/">prose</a>
            <a class="life-tag" href="/topics/life/">life</a>
        </li>
        <li class="breadcrumb">
            <a class="prose-tag" href="/topics/prose/">prose</a>
            <a class="faith-tag" href="/topics/faith/">faith</a>
        </li>
        <li class="breadcrumb">
            <a class="philosophy-tag" href="/topics/philosophy/">philosophy</a>
            <a class="ethics-tag" href="/topics/ethics/">ethics</a>
        </li>
        <li class="breadcrumb">
            <a class="code-tag" href="/topics/code/">code</a>
            <a class="ruby-tag" href="/topics/ruby/">ruby</a>
            <a class="interpreter-tag" href="/topics/interpreter/">interpreter</a>
        </li>
        <li class="breadcrumb">
            <a class="tutorial-tag" href="/topics/tutorial/">tutorial</a>
            <a class="interpreter-tag" href="/topics/interpreter/">interpreter</a>
        </li>
        <li class="breadcrumb">
            <a class="code-tag" href="/topics/code/">code</a>
            <a class="mvc-tag" href="/topics/mvc/">mvc</a>
        </li>
        <li class="breadcrumb">
            <a class="academia-tag" href="/topics/academia/">academia</a>
            <a class="latin-tag" href="/topics/latin/">latin</a>
            <a class="vergil-tag" href="/topics/vergil/">vergil</a>
        </li>
        <li class="breadcrumb">
            <a class="academia-tag" href="/topics/academia/">academia</a>
            <a class="greek-tag" href="/topics/greek/">greek</a>
            <a class="epicurus-tag" href="/topics/epicurus/">epicurus</a>
        </li>
        <li class="breadcrumb">
            <a class="academia-tag" href="/topics/academia/">academia</a>
            <a class="greek-tag" href="/topics/greek/">greek</a>
            <a class="aristotle-tag" href="/topics/aristotle/">aristotle</a>
        </li>
        <li class="breadcrumb">
            <a class="academia-tag" href="/topics/academia/">academia</a>
            <a class="latin-tag" href="/topics/latin/">latin</a>
            <a class="horace-tag" href="/topics/horace/">horace</a>
        </li>
        <li class="breadcrumb">
            <a class="academia-tag" href="/topics/academia/">academia</a>
            <a class="modern-tag" href="/topics/modern/">modern</a>
            <a class="lewis-tag" href="/topics/lewis/">lewis</a>
        </li>
        <li class="breadcrumb">
            <a class="academia-tag" href="/topics/academia/">academia</a>
            <a class="modern-tag" href="/topics/modern/">modern</a>
            <a class="barfield-tag" href="/topics/barfield/">barfield</a>
        </li>
        <li class="breadcrumb">
            <a class="academia-tag" href="/topics/academia/">academia</a>
            <a class="greek-tag" href="/topics/greek/">greek</a>
            <a class="herodotus-tag" href="/topics/herodotus/">herodotus</a>
        </li>
        <li class="breadcrumb">
            <a class="academia-tag" href="/topics/academia/">academia</a>
            <a class="greek-tag" href="/topics/greek/">greek</a>
            <a class="hippocrates-tag" href="/topics/hippocrates/">hippocrates</a>
        </li>
        <li class="breadcrumb">
            <a class="academia-tag" href="/topics/academia/">academia</a>
            <a class="greek-tag" href="/topics/greek/">greek</a>
            <a class="plato-tag" href="/topics/plato/">plato</a>
        </li>
        <li class="breadcrumb">
            <a class="academia-tag" href="/topics/academia/">academia</a>
            <a class="modern-tag" href="/topics/modern/">modern</a>
            <a class="saussure-tag" href="/topics/saussure/">saussure</a>
        </li>
        <li class="breadcrumb">
            <a class="code-tag" href="/topics/code/">code</a>
            <a class="alfred-tag" href="/topics/alfred/">alfred</a>
        </li>
        <li class="breadcrumb">
            <a class="code-tag" href="/topics/code/">code</a>
            <a class="bash-tag" href="/topics/bash/">bash</a>
        </li>
        <li class="breadcrumb">
            <a class="code-tag" href="/topics/code/">code</a>
            <a class="python-tag" href="/topics/python/">python</a>
        </li>
    </ul>
  </div>
</aside>


    <footer role="contentinfo">
  <div class="footer-info">
    <p>&copy; Copyright 2015 by Stephen Margheim</p>
    <p>Powered by <a href="https://middlemanapp.com">Middleman</a>.</p>
  </div>
</footer>


  </body>
</html>
